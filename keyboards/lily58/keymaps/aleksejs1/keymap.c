#include QMK_KEYBOARD_H

#include "keycodes.h"

// enum layer_number {
//   _QWERTY = 0,
//   _LOWER,
//   _RAISE,
//   _ADJUST,
//   _LOL
// };

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

 [_QWERTY] = LAYOUT(

/* /-----------------------------------------------------------------------------\                     /-----------------------------------------------------------------------------\ */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
      KC_ESC ,     KC_1     ,     KC_2     ,     KC_3     ,     KC_4     , KC_5  ,                        KC_6  ,    KC_7     ,    KC_8     ,    KC_9     ,      KC_0      , KC_GRV  , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
      KC_TAB ,     KC_Q     ,     KC_W     ,     KC_E     ,     KC_R     , KC_T  ,                        KC_Y  ,    KC_U     ,    KC_I     ,    KC_O     ,      KC_P      , KC_LBRC , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     KC_LCTL , LGUI_T(KC_A) , RALT_T(KC_S) , LSFT_T(KC_D) , LCTL_T(KC_F) , KC_G  ,                        KC_H  , RCTL_T(KC_J), RSFT_T(KC_K), RALT_T(KC_L), RGUI_T(KC_SCLN), KC_QUOT , 
/* ----------+--------------+--------------+--------------+--------------+-------+---------\  /--------+--------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |         |  |        |        |             |             |             |                |         | */
     KC_LSFT ,     KC_Z     ,     KC_X     ,     KC_C     ,     KC_V     , KC_B  , KC_MINS ,   KC_RBRC ,  KC_N  ,    KC_M     ,   KC_COMM   ,    KC_DOT   ,     KC_SLSH    , KC_BSLS , 
/* \------------------------+--------------+--------------+--------------+-------+---------/  \--------+--------+-------------+-------------+-------------+--------------------------/ */
/*                          |              |              |              |       |                     |        |             |             |             |                            */
                                 KC_LALT   ,     MO(2)    ,     MO(1)    , KC_SPC,                       KC_ENT ,    MO(2)    ,   KC_BSPC   , KC_DEL
/*                           \---------------------------------------------------/                     \--------------------------------------------------/                            */

),
[_LOWER] = LAYOUT(

/* /-----------------------------------------------------------------------------\                     /-----------------------------------------------------------------------------\ */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
      KC_ESC ,    KC_DEL    ,   KC_PAST    ,    KC_F3     ,    KC_F4     , KC_F5 ,                        KC_F6 ,    KC_F10   ,    KC_F11   ,    KC_F12   ,     KC_F10     , KC_F11  , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
      KC_TAB ,    KC_BSPC   ,   KC_PSLS    ,     KC_7     ,     KC_8     , KC_9  ,                        KC_F6 ,    KC_F7    ,    KC_F8    ,    KC_F9    ,     KC_F10     , KC_F12  , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     KC_LCTL ,    KC_PSCR   ,   KC_PMNS    ,     KC_4     ,     KC_5     , KC_6  ,                       KC_CIRC,    KC_F4    ,    KC_F5    ,    KC_F6    ,     KC_RPRN    , KC_TILD , 
/* ----------+--------------+--------------+--------------+--------------+-------+---------\  /--------+--------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |         |  |        |        |             |             |             |                |         | */
     KC_LSFT ,    KC_INS    ,   KC_BSLS    ,     KC_1     ,     KC_2     , KC_3  , _______,     KC_EQL , KC_BSLS,    KC_F1    ,    KC_F2    ,   KC_F3     ,     KC_RCBR    , KC_PIPE , 
/* \------------------------+--------------+--------------+--------------+-------+---------/  \--------+--------+-------------+-------------+-------------+--------------------------/ */
/*                          |              |              |              |       |                     |        |             |             |             |                            */
                                KC_PDOT    ,     KC_0     ,   _______    , KC_ENT,                       _______,    MO(3)    ,   _______   ,   _______
/*                           \---------------------------------------------------/                     \--------------------------------------------------/                            */
),

[_RAISE] = LAYOUT(

/* ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
/* |         |              |              |              |              |       |                     |        |                    |                             |             |                |         | */
      KC_ESC ,    _______   ,   _______    ,    KC_PSCR   ,   KC_SCRL    ,KC_PAUS,                       KC_PAST,   KC_NUM           ,   KC_PSLS                   ,   KC_PAST   ,    KC_PMNS     , KC_CAPS , 
/* |         |              |              |              |              |       |                     |        |                    |                             |             |                |         | */
      KC_TAB ,    KC_LEFT   ,    KC_UP     ,    KC_DOWN   ,   KC_RGHT    , KC_NO ,                       KC_PSLS,    KC_7            ,    KC_8                     ,    KC_9     ,    KC_PPLS     , _______ , 
/* |         |              |              |              |              |       |                     |        |                    |                             |             |                |         | */
     KC_LCTL ,    KC_LEFT   ,  KC_DOWN     ,    KC_RGHT   ,    KC_NO     , KC_NO ,                       KC_PMNS, MT(MOD_LCTL,KC_4)  ,MT(MOD_LSFT | MOD_RSFT,KC_5) ,RALT_T(KC_6) , RGUI_T(KC_PENT), KC_DOT, 
/* |         |              |              |              |              |       +---------\  /--------+        |                    |                             |             |                |         | */
     KC_LSFT ,     KC_INS   ,  KC_PGUP     ,    KC_PGDN   ,  KC_HOME     , KC_END, _______ ,    KC_EQL , KC_PPLS, KC_1               ,   KC_2                      ,   KC_3      ,    KC_PDOT     , KC_COMM , 
/* \------------------------+              +              +              +       +---------/  \--------+        +                    +                             +             +--------------------------/ */
                               _______     ,    _______   ,   MO(3)      ,_______,                       _______,   _______          ,   KC_BSPC                   ,   KC_0
/*                           \---------------------------------------------------/                     \-------------------------------------------------------------------------/                            */
),

  [_ADJUST] = LAYOUT(

/* /-----------------------------------------------------------------------------\                     /-----------------------------------------------------------------------------\ */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   TG(_LOL)   ,_______,                      _______ ,   _______   ,   _______   ,   _______   ,    _______     ,_______  , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   _______    ,_______,                      _______ ,   _______   ,   _______   ,   _______   ,    _______     ,_______  , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   _______    ,_______,                      _______ ,   _______   ,   _______   ,   _______   ,    _______     , _______  , 
/* ----------+--------------+--------------+--------------+--------------+-------+---------\  /--------+--------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |         |  |        |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   _______    ,_______, _______ ,   _______ ,_______ ,   _______   ,   _______   ,   _______   ,    _______     , _______ , 
/* \------------------------+--------------+--------------+--------------+-------+---------/  \-------+--------+-------------+-------------+-------------+--------------------------/ */
/*                          |              |              |              |       |                     |        |             |             |             |                            */
                                _______    ,   _______    ,   _______    ,_______,                       _______,   _______   ,   _______   ,   _______
/*                           \---------------------------------------------------/                     \--------------------------------------------------/                            */

  ),

  [_LOL] = LAYOUT(
/* /-----------------------------------------------------------------------------\                     /-----------------------------------------------------------------------------\ */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   _______    ,  KC_Z ,                      KC_PAST ,   _______   ,   _______   ,   _______   ,    _______     ,_______  , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   _______    ,_______,                      KC_PSLS ,   KC_P7     ,   KC_P8     ,   KC_P9     ,    _______     ,_______  , 
/* |---------+--------------+--------------+--------------+--------------+--------                     ---------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |                     |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   _______    ,_______,                      KC_PMNS ,   KC_P4     ,   KC_P5     ,   KC_P6     ,    _______     , KC_DOT  , 
/* ----------+--------------+--------------+--------------+--------------+-------+---------\  /--------+--------+-------------+-------------+-------------+----------------+---------| */
/* |         |              |              |              |              |       |         |  |        |        |             |             |             |                |         | */
     _______ ,   _______    ,   _______    ,   _______    ,   _______    ,_______, _______ ,    KC_EQL ,KC_PPLS ,   KC_P1     ,   KC_P2     ,   KC_P3     ,    KC_PDOT     , KC_COMM , 
/* \------------------------+--------------+--------------+--------------+-------+---------/  \--------+--------+-------------+-------------+-------------+--------------------------/ */
/*                          |              |              |              |       |                     |        |             |             |             |                            */
                                _______    ,   _______    ,   _______    ,_______,                       _______,   _______   ,   _______   ,   KC_P0
/*                           \---------------------------------------------------/                     \--------------------------------------------------/                            */
  )
};

const uint16_t PROGMEM lay4[] = {KC_1, KC_ESC, COMBO_END};
const uint16_t PROGMEM lay4b[] = {KC_X, KC_C, COMBO_END};
const uint16_t PROGMEM bcspc[] = {KC_U, KC_I, COMBO_END};
const uint16_t PROGMEM at[] = {KC_1, KC_2, COMBO_END};
const uint16_t PROGMEM hashtag[] = {KC_2, KC_3, COMBO_END};
const uint16_t PROGMEM dollar[] = {KC_3, KC_4, COMBO_END};
const uint16_t PROGMEM upp[] = {KC_6, KC_7, COMBO_END};
const uint16_t PROGMEM amper[] = {KC_7, KC_8, COMBO_END};
const uint16_t PROGMEM homee[] = {KC_C, KC_V, COMBO_END};
const uint16_t PROGMEM homeeAlt[] = {KC_Z, KC_X, KC_C, COMBO_END};
const uint16_t PROGMEM homeeAlt2[] = {LGUI_T(KC_A) , RALT_T(KC_S) , LSFT_T(KC_D), COMBO_END};
const uint16_t PROGMEM endd[] = {KC_V, KC_B, COMBO_END};
const uint16_t PROGMEM enddAlt[] = {KC_X, KC_C, KC_V, COMBO_END};
const uint16_t PROGMEM enddAlt2[] = {RALT_T(KC_S), LSFT_T(KC_D) , LCTL_T(KC_F), COMBO_END};

combo_t key_combos[] = {
//    COMBO(lay4, MO(_LOL)),
    COMBO(lay4, TG(_LOL)),
//    COMBO(lay4b, TO_NUM),
    COMBO(bcspc, KC_BSPC),
    COMBO(at, UC(0x0064)), // @
    COMBO(hashtag, UC(0x0035)), // #
    COMBO(dollar, UC(0x0036)), // $
    COMBO(upp, UC(0x0094)), // ^
    COMBO(amper, UC(0x0038)), // &
//    COMBO(homeeAlt, KC_HOME),
    COMBO(homeeAlt2, KC_HOME),
//    COMBO(enddAlt, KC_END),
    COMBO(enddAlt2, KC_END),
};

// layer_state_t layer_state_set_user(layer_state_t state) {
//   return update_tri_layer_state(state, _LOWER, _RAISE, _ADJUST);
// }

bool _process_record_user(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
      case TO_NUM:
            layer_on(_LOL);
            return false;
      case CANCEL:
            layer_off(_LOL);
            return false;
    }
    return true;
}


bool process_record_user(uint16_t keycode, keyrecord_t *record) {
  bool res = _process_record_user(keycode, record);
  return res;
}

// qmk compile -kb lily58 -km default
